const Software=require("../../models/software");exports.getAddSoftware=(req,res,next)=>{res.render("admin/edit-software",{pageTitle:"All Software",path:"/admin/add-software",editing:!1})},exports.postAddSoftware=(req,res,next)=>{const softwareLogo=req.body.softwareLogo,title=req.body.title,description=req.body.description,softwareLink=req.body.softwareLink,softwareLinkText=req.body.softwareLinkText,software=new Software({softwareLogo:softwareLogo,title:title,description:description,softwareLink:softwareLink,softwareLinkText:softwareLinkText,userId:req.user});software.save().then(result=>{console.log("Created Used Software"),res.redirect("/admin/all-software")}).catch(err=>{console.log(err)})},exports.getEditSoftware=(req,res,next)=>{const editMode=req.query.edit;if(!editMode)return res.redirect("/");const softwareId=req.params.softwareId;Software.findById(softwareId).then(software=>{if(!software)return res.redirect("/");res.render("admin/edit-software",{pageTitle:"Edit Software",path:"/admin/edit-software",editing:editMode,software:software})}).catch(err=>console.log(err))},exports.postEditSoftware=(req,res,next)=>{const softwareId=req.body.softwareId,updatedSoftwareLogo=req.body.softwareLogo,updatedTitle=req.body.title,updatedDescription=req.body.description,updatedSoftwareLink=req.body.softwareLink,updatedSoftwareLinkText=req.body.softwareLinkText;Software.findById(softwareId).then(software=>(software.softwareLogo=updatedSoftwareLogo,software.title=updatedTitle,software.description=updatedDescription,software.softwareLink=updatedSoftwareLink,software.softwareLinkText=updatedSoftwareLinkText,software.save())).then(result=>{console.log("UPDATED SOFTWARE!"),res.redirect("/admin/all-software")}).catch(err=>console.log(err))},exports.getAllSoftwares=(req,res,next)=>{Software.find().then(softwares=>{console.log(softwares),res.render("admin/all-software",{soft:softwares,pageTitle:"Admin All Software Used",path:"/admin/all-software"})}).catch(err=>console.log(err))},exports.postDeleteSoftware=(req,res,next)=>{const softwareId=req.body.softwareId;Software.findByIdAndRemove(softwareId).then(()=>{console.log("DESTROYED SOFTWARE"),res.redirect("/admin/all-software")}).catch(err=>console.log(err))};